<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>House Points Tracker</title>

  <!-- Firebase SDK (copy from Firebase console) -->
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>

  <script>
    // Your web app's Firebase configuration (from Firebase console)
    const firebaseConfig = {
      apiKey: "AIzaSyCNjpVQ84xLdRVm7pdIUg91HVAyadKnAYo",
      authDomain: "house-points-73a56.firebaseapp.com",
      databaseURL: "https://house-points-73a56-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "house-points-73a56",
      storageBucket: "house-points-73a56.appspot.com",
      messagingSenderId: "870411267637",
      appId: "1:870411267637:web:add34179db0c649b8c0b7c"
      measurementId: "G-7ZHZT807QB"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>
</head>
<body>

  <!-- Your HTML content like the score tracker, buttons, etc. -->

  <script>
    // Initialize points object
    const points = {
      gryffindor: 0,
      hufflepuff: 0,
      ravenclaw: 0,
      slytherin: 0
    };

    let maxPoints = 200; // Starting max points

    // Load points from Firebase (use this function when the page loads)
    function loadPoints() {
      firebase.database().ref('points/').once('value').then(snapshot => {
        const savedPoints = snapshot.val();
        if (savedPoints) {
          points.gryffindor = savedPoints.gryffindor || 0;
          points.hufflepuff = savedPoints.hufflepuff || 0;
          points.ravenclaw = savedPoints.ravenclaw || 0;
          points.slytherin = savedPoints.slytherin || 0;
        }
        updateBars(); // Update the display of the bars after loading points
      });
    }

    // Save points to Firebase (call this function after any update)
    function savePoints() {
      firebase.database().ref('points/').set(points);
    }

    // Update the points bars
    function updateBars() {
      Object.keys(points).forEach(house => {
        const bar = document.getElementById(`${house}-bar`).firstElementChild;
        const score = document.getElementById(`${house}-score`);
        const maxBarHeight = 200; // Maximum height of the bar

        // Adjust maxPoints if any house exceeds it
        if (points[house] > maxPoints) {
          maxPoints = points[house];
        }

        // Ensure the bars always have a minimum height for visibility
        const height = Math.max((points[house] / maxPoints) * maxBarHeight, 5); // Minimum height of 5px
        bar.style.height = height + 'px';

        score.textContent = points[house]; // Display current points above the bar
      });
    }

    // Function to add points and save to Firebase
    function addPoints(house, pointsToAdd) {
      points[house] += pointsToAdd;
      points[house] = Math.max(0, points[house]); // Ensure points don't go below zero
      updateBars();  // Update the display
      savePoints();  // Save the updated points to Firebase
    }

    // Load the points when the page loads
    window.onload = loadPoints;
  </script>

</body>
</html>
